# 数据集成简介

PieCloudDB 的数据集成（Dataflow）功能支持从不同的数据库抽取数据，并将其加载到同构或异构的目标数据库中。这一数据迁移任务管理服务依托于 PieCloudDB 管控平台实现。用户只需在平台上配置数据源、数据流和作业调度，即可实现数据全量迁移与备份的可视化和精细化管理。

数据集成功能主要适用于将多源数据库的历史数据进行全量或者增量迁移至中央历史数仓，并进行汇聚处理的场景。

在当前版本中，数据集成支持两种数据迁移任务类型：离线同步和实时同步。对于非周期性作业，系统会创建一个单次任务，这可以是离线同步任务或实时同步任务；对于周期性作业，系统会创建一个定期执行的任务并按照预设周期运行。但请注意，周期性作业目前仅适用于表到表的离线同步任务。

<note type="attention">
   <p> 数据集成功能属于 PieCloudDB 企业版的定制化功能，需要进行独立部署。有关部署方式，请联系 OpenPie 技术支持团队。</p>   
</note>

## 核心特性

数据集成的核心特性包括但不限于：

* 支持多种数据源

  能够从多种数据源抽取数据并加载到目标数据库，实现了对异构数据源（例如 MySQL、PostgreSQL 等）的自动化配置。同时，提供目标数据库 Schema 创建语法的自动化支持，并内置及自定义字段改写规则。

* 支持多种内置校验算法

  在数据迁移过程中，提供数据一致性校验，包括全量目标数据表校验和单次作业范围校验，确保数据的全面和高效准确性。

* 任务调度精细化管理

  用户可以按需选择单表、多表或全库的方式进行历史数据迁移，并支持灵活的单次或周期性迁移作业策略。

* 多线程高效运行

  数据集成过程采用多线程技术，高效处理数据的导出、压缩、导入以及数据校验等任务，显著提升数据处理效率。

* 可视化监控

  基于 PieCloudDB 管控平台，实现数据集成流程的可视化监控。例如，实时展示数据导出和导入的进度条；通过数据集成总览面板全局查看数据集成任务的状态。

* 国产化部署

  支持部署在 x86 和 ARM CPU 架构的服务器，并适配主流国产操作系统，例如 Kylin OS 等。

## 前期准备

在执行数据集成之前，请确保完成以下准备工作：
* 源数据库准备工作

  确保源数据库提供了一个具有所需迁移库表读取权限的用户。此外，该用户需要能够从运行数据集成的服务器或容器访问源数据库。

* 目标数据库准备工作

  预先在目标数据库中创建好需要导入数据的表，并确保有一个用户具备对这些表的写入权限。同样，该用户需要能够从运行数据集成的服务器或容器访问目标数据库。

## 离线同步任务使用流程

数据集成功能支持创建离线同步任务，适用于批处理数据的场景。对于离线同步任务，建议使用流程如下：

<img src="https://pdb-doc.oss-cn-beijing.aliyuncs.com/dataflow/v2/offline-workflow.png" scope="external" />

1. [授予用户数据集成功能权限](20.dataflow-privilege.md)  
2. [配置调度系统](40.system-configuration.md)
3. [创建源数据源并配置连接](50.create-data-source.md)
4. [配置源数据源的表的映射关系](60.config-associated-tables.md)
5. [创建和执行 DDL 任务为目标数据源创建新的表](80.create-ddl-task.md)
6. [配置目标数据源的表的映射关系](60.config-associated-tables.md)
7. [创建离线同步任务](90.create-offline-sync-task.md)

## 实时同步任务使用流程

数据集成功能支持创建实时同步任务，适用于流处理数据的场景。对于实时同步任务，建议使用流程如下：

<img src="https://pdb-doc.oss-cn-beijing.aliyuncs.com/dataflow/v2/realtime-workflow.png" scope="external" />

1. [授予用户数据集成功能权限](20.dataflow-privilege.md)  
2. [创建源数据源并配置连接](50.create-data-source.md)
3. [配置源数据源的表的映射关系](60.config-associated-tables.md)
5. [创建和执行 DDL 任务为目标数据源创建新的表](80.create-ddl-task.md)
6. [配置目标数据源的表的映射关系](60.config-associated-tables.md)
7. [创建实时同步任务](110.create-realtime-sync-task.md)



