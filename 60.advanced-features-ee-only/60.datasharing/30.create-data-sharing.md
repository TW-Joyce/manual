# 创建与管理数据共享

数据共享的数据为公共数据和私有数据。公共数据是指在目标组织内公开可见的数据，但该组织以外的计算空间无法查看这些数据，因此也无法订阅这些数据。而私有数据不在组织下公开，只能共享给指定的计算空间。

## 创建数据共享

在「**数据共享**」页面，数据分享者在创建数据共享时，需依次添加共享表和共享对象，具体步骤如下：

1. 切换到“我共享的”面板，该面板会显示当前计算空间下创建的所有共享。

2. 在页面点击 **新建共享**，在弹出的窗口中，参考如下步骤创建共享：
   1. 输入所创建共享的名称和描述。
   2. 选择是否在组织下公开，即组织下所有计算空间可用。选项“是”表明该共享的数据是公共数据，选项“否”则表明该共享的数据是私有数据。
   
      <img src="https://pdb-doc.oss-cn-beijing.aliyuncs.com/data-sharing/v1/create-new-ds.png" scope="external" />

   3. 点击 **确认**，所创建的共享信息会同步到“我共享的”面板的列表中。

      <img src="https://pdb-doc.oss-cn-beijing.aliyuncs.com/data-sharing/v1/new-ds-list-1.png" scope="external" />

3. 在“我共享的”面板的列表中的目标共享所在行的“操作”栏下，点击 **管理共享数据**，在弹出的窗口中，参考如下步骤添加共享表。

   1. 在对应的下拉列表中，依次选择数据库和数据库中指定 Schema 下的目标表。

      <img src="https://pdb-doc.oss-cn-beijing.aliyuncs.com/data-sharing/v1/manage-share-data-1.png" scope="external" />

   2. 点击 **添加表** 即可将目标表添加到共享数据列表（支持添加多个共享表）。

      <img src="https://pdb-doc.oss-cn-beijing.aliyuncs.com/data-sharing/v1/add-ds-table-1.png" scope="external" />

      <note type="attention">
         <p> 如果要添加的指定数据库下的目标表已存在于其他共享中，会导致添加失败，并报错“记录已存在”。</p>   
      </note>

   3. 共享表添加完成后，点击 **X** 即可退出窗口，并返回到“我共享的”面板。

4. 在“我共享的”面板的列表中的目标共享所在行的“共享对象”栏下，点击 **查看**，在弹出的窗口中，参考如下步骤添加共享对象（即计算空间）。
   1. 输入指定的计算空间 ID，点击 **添加** 即可将该计算空间添加为共享对象（支持添加多个共享对象）。  

       <img src="https://pdb-doc.oss-cn-beijing.aliyuncs.com/data-sharing/v1/add-share-objects.png" scope="external" />

       <note type="tip">
          <p> 如果共享数据为公共数据，也可以省略此步骤，因为本计算空间以外的数据订阅者在订阅侧也能获取此公共共享信息并执行订阅操作；而对于私有数据，则必须通过此步骤添加共享对象。</p>   
       </note>

       如需移除目标共享对象，在目标共享对象所在行的“操作”栏下，点击 **移除** 即可。

   2. 共享对象添加完成后，点击 **X** 即可退出窗口，并返回到“我共享的”面板。

## 管理数据共享

数据共享者在管理共享数据时，需注意以下事项：

* 如果公共共享数据的分享者希望将公共数据转为私有数据，只需将共享数据的“是否公共”属性设置为“否”。此时，如果已有计算空间订阅了该数据，订阅关系不会失效；但如果分享者将已订阅的计算空间从共享中移除，那么映射到接收者本地的数据访问将会失效。

  在“我共享的”面板的目标共享所在行的隐藏菜单栏下，选择 **编辑** 选项即可修改共享数据的属性。

* 如果公共共享数据的分享者想要删除该共享，必须先移除所有共享对象，之后才能成功删除共享。

  在“我共享的”面板的目标共享所在行的隐藏菜单栏下，选择 **删除** 选项即可删除共享。
