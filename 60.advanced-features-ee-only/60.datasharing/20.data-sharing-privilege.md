# 关于数据共享权限

数据共享功能的目标用户通常分为两类：数据分享者和数据订阅者。数据分享者可以将数据加入共享，并指定共享的计算空间；数据订阅者可以订阅公开的共享数据，同时管理那些被指定共享至当前计算空间的数据。基于用户视角，数据共享功能的权限设置涵盖了系统权限以及数据库对象权限。

## 权限说明

* 系统权限

  数据共享功能支持如下系统预设权限：
  * 数据共享菜单：控制数据共享功能的显示与隐藏。如果用户未被授予相应权限，则无法访问数据共享功能。
  * 共享数据分享信息：允许用户查看指定计算空间下共享的数据信息。
  * 共享数据分享管理：允许用户在指定计算空间下创建、删除和编辑共享。
  * 共享数据接收信息：允许用户查看共享给所在计算空间的数据信息。
  * 共享数据接收管理：允许用户订阅或取消订阅公共数据共享，并将共享表映射到本地。

  其中，“共享数据分享信息”为 PUBLIC 权限。除此权限外，数据分享者还需要同时具有“数据共享菜单”与“共享数据分享管理”的权限；而数据订阅者还需要同时具有“数据共享菜单”、“共享数据接收信息”与“共享数据接收管理”的权限。

  <note type="tip">
    <p>Account Manager 角色的初始权限默认包括上述数据共享功能的系统预设权限。</p>   
  </note>

* 数据库对象权限

  数据共享的数据库对象权限与表的 `SELECT` 权限相对应。如果用户对某张表具有 `SELECT` 权限，并且同时具备“数据共享菜单”与“共享数据分享管理”的系统权限，那么该用户就可以创建共享，并且能够将自己拥有 `SELECT` 权限的表加入到共享中，进而分享给其他计算空间。

## 如何授予用户相关权限

本文通过具体示例来介绍如何在 PieDataCS 云原生平台对一位新用户授予数据共享功能的接收和管理权限。

1. 创建自定义角色并授予其数据订阅者的相应权限。

   以管理员身份进入目标计算空间并创建自定义角色（例如 data-subscriber）。将“数据共享菜单”、“共享数据接收信息”与“共享数据接收管理”权限授予该角色之后，保存并应用所做的修改。
   
   <img src="https://pdb-doc.oss-cn-beijing.aliyuncs.com/data-sharing/v1/data-subscriber-sys-1.png" scope="external" />
   
   <note type="tip">
      <p> 如果当前其他角色已具有相关权限，在创建自定义角色时也可以通过直接继承角色的方式获得该权限。</p>   
   </note>

   有关创建自定义角色的详细信息，请参见 [管理计算空间角色-添加自定义角色](../../50.computational-spaces-guide/90.manage-space-role.md)。

2. 创建新用户作为数据订阅者。
   
   以管理员身份在计算空间的「**用户**」页面创建一个新用户（例如 data_receiver），并填写相应的注册信息。

    <img src="https://pdb-doc.oss-cn-beijing.aliyuncs.com/data-sharing/v1/data-receiver-user.png" scope="external" />

    有关新建用户的详细信息，请参见 [管理计算空间用户-新建用户](../../50.computational-spaces-guide/80.manage-space-user.md)。

3. 授予新用户以角色并继承相应的数据订阅者的权限。

   新用户通过审核后，在计算空间的「**用户**」页面，管理员可以进入该用户的详情页面，并为其赋予 **步骤 1** 中创建的角色。完成这一步骤后，该用户将继承相应的权限。

    <img src="https://pdb-doc.oss-cn-beijing.aliyuncs.com/data-sharing/v1/grant-role-to-receiver.png" scope="external" />
   
   有关授予用户以角色的详细信息，请参见 [管理计算空间用户-授予/收回用户的角色](../../50.computational-spaces-guide/80.manage-space-user.md)。
   
在 **步骤 3**所创建的用户被赋予相关权限后，即可登录 PieDataCS 云原生平台，使用订阅数据共享功能，请参见 [订阅数据共享并映射到本地](40.subscribe-data-sharing.md)。
   
如果需要为用户赋予数据分享者的相关权限（“数据共享菜单”和“共享数据分享管理”），可以参考上述步骤进行操作。需要注意的是，数据分享者和数据订阅者需要处于不同的计算空间中。